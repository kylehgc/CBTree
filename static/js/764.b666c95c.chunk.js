"use strict";(self.webpackChunkcb_tree=self.webpackChunkcb_tree||[]).push([[764],{6764:function(e,r,n){n.r(r),n.d(r,{default:function(){return g}});var t=n(885),a=n(164),i=n(3393),s=n(1340),o=n(6134),l=n(2791);function u(){return u=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},u.apply(this,arguments)}var c=["className","rows"],d=(0,s.Gp)((function(e,r){var n=(0,s.mq)("Textarea",e),t=(0,s.Lr)(e),a=t.className,d=t.rows,f=function(e,r){if(null==e)return{};var n,t,a={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}(t,c),p=(0,i.Yp)(f),v=d?(0,o.CE)(n,["h","minH","height","minHeight"]):n;return l.createElement(s.m$.textarea,u({ref:r,rows:d},p,{className:(0,o.cx)("chakra-textarea",a),__css:v}))}));o.Ts&&(d.displayName="Textarea");var f=n(8735),p=n(7231),v=n(2504),h=n(1789),m=n(7657),b=n(1396),x=n(184),g=function(){var e=(0,h.Z)().foregroundColor,r=(0,l.useState)(""),n=(0,t.Z)(r,2),i=n[0],s=n[1],o=(0,a.Z)(),u=o.label,c=o.onSubmit,g=o.isSubmitting,y=o.thoughtRecord,k=o.currentQuestion,R=o.isValidQuestion;(0,l.useEffect)((function(){if(y&&(0,m.yt)(k,y)&&!i){var e=y[k];"string"===typeof e&&s(e)}}),[k,y]);return y&&R?(0,x.jsxs)(f.gC,{spacing:0,rounded:"3xl",w:"full",minH:"100%",flexDirection:"column",mt:6,alignContent:"center",justifyContent:"center",mx:2,px:5,py:0,children:[(0,x.jsx)(p.Rg,{offsetY:0,offsetX:"50%",transition:{enter:{duration:.2},exit:{delay:.7,duration:.3}},style:{display:"flex",flexDirection:"column",height:"90%",width:"100%"},in:!g,children:(0,x.jsx)(d,{placeholder:u,onChange:function(e){s(e.target.value)},value:i,color:"black",_placeholder:{color:"blackAlpha.800",fontSize:"3xl"},p:4,bg:e,h:"90%",w:"full",rounded:"xl",size:"lg"})}),(0,x.jsx)(p.Rg,{in:!g,offsetY:0,transition:{enter:{delay:.2,duration:.4},exit:{delay:.3,duration:.3}},offsetX:"100px",style:{flexDirection:"column",display:"flex",height:"10%",width:"100%"},children:(0,x.jsx)(v.zx,{disabled:i.length<1,variant:"submit",alignSelf:"center",isLoading:g,background:e,loadingText:"Submitting",onClick:function(){return c(i)},children:"Submit"})})]}):(0,x.jsx)(b.Z,{})}},164:function(e,r,n){n.d(r,{Z:function(){return m}});var t=n(1413),a=n(5861),i=n(885),s=n(7762),o=n(7757),l=n.n(o),u=n(7957),c=n(2791),d=n(6871),f=n(7657),p=n(2331),v=n(4942),h=n(20),m=function(){var e=(0,u.pm)(),r=(0,d.s0)(),n=(0,d.TH)(),o=n.pathname,m=n.state,b=(0,c.useState)(),x=(0,i.Z)(b,2),g=x[0],y=x[1],k=(0,c.useState)(null),R=(0,i.Z)(k,2),T=R[0],w=R[1],Z=function(){var e=(0,h.Z)().logout,r=(0,p.Ek)(),n=(0,c.useState)(!1),s=(0,i.Z)(n,2),o=s[0],u=s[1],d=function(){var r=(0,a.Z)(l().mark((function r(n,t){var a,i;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!o){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,u(!0);case 4:return r.next=6,fetch(n,t);case 6:if(!(a=r.sent).ok){r.next=13;break}return r.next=10,a.json();case 10:return i=r.sent,u(!1),r.abrupt("return",i);case 13:a.status,e(),r.next=18;break;case 17:throw Error(a.statusText);case 18:case"end":return r.stop()}}),r)})));return function(e,n){return r.apply(this,arguments)}}(),m=function(){var e=(0,a.Z)(l().mark((function e(n){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(p.n3,r);case 2:if(t=e.sent,!(0,f.OZ)(t)){e.next=5;break}return e.abrupt("return",t);case 5:throw Error("not a thought record");case 6:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),b=function(){var e=(0,a.Z)(l().mark((function e(){var n,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,t.Z)({method:"POST"},r),e.next=3,d(p.n3,n);case 3:if(a=e.sent,!(0,f.OZ)(a)){e.next=8;break}return e.abrupt("return",a);case 8:throw Error("response isnt valid");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=(0,a.Z)(l().mark((function e(){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:(0,t.Z)((0,t.Z)({},(0,p.Ek)().headers),{},{Accept:"application/json","Content-Type":"application/json"}),method:"POST"},e.next=3,d("".concat(p.xr,"/thoughtrecord"),r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,a.Z)(l().mark((function e(n,a,i){var s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(s={headers:(0,t.Z)({Accept:"application/json","Content-Type":"application/json"},r.headers),method:"PATCH"}).body=JSON.stringify((0,v.Z)({},i,n)),e.next=4,d("".concat(p.n3,"/").concat(a),s);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(r,n,t){return e.apply(this,arguments)}}();return{updateThoughtRecord:g,getActiveThoughtRecord:m,getNewThoughtRecord:b,isSubmitting:o,saveThoughtRecord:x}}(),O=Z.updateThoughtRecord,E=Z.getActiveThoughtRecord,I=Z.isSubmitting,N=Z.saveThoughtRecord,_=(0,p.LP)();if(!_)throw Error;(0,c.useEffect)((function(){if(!T&&(0,f.KX)(o)&&g){var e=function(e,r){var n,t=(0,s.Z)(f.wv);try{for(t.s();!(n=t.n()).done;){var a=n.value,i=a.slice(1);if(a===e)return a;if((0,f.yt)(i,r)&&null===r[i])return a}}catch(o){t.e(o)}finally{t.f()}return e}(o,g);e!==o?r(e):w(!0)}}),[T,r,o,g]),(0,c.useEffect)((function(){var e=function(){var e=(0,a.Z)(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(g){e.next=10;break}if(!(0,f.OZ)(m)){e.next=5;break}y(m),e.next=10;break;case 5:return e.t0=y,e.next=8,E(_);case 8:e.t1=e.sent,(0,e.t0)(e.t1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();I||e()}),[E,I,m,g,_]);var q=function(){var n=(0,a.Z)(l().mark((function n(a){var i,s,u,c;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(0,f.KX)(o)){n.next=26;break}if("/submit"!==o){n.next=13;break}return n.prev=2,n.next=5,N();case 5:r("/"),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),n.t0 instanceof Error&&e({status:"error",description:"problem submitting"});case 11:n.next=26;break;case 13:return i=o.slice(1),s=(0,f.OZ)(g)?g.key:"",u=f.wv.indexOf(o)+1,n.prev=16,n.next=19,O(a,s,i);case 19:c=n.sent,r(f.wv[u],{state:(0,t.Z)({},c)}),n.next=26;break;case 23:n.prev=23,n.t1=n.catch(16),e({status:"error",description:"problem with update"});case 26:case"end":return n.stop()}}),n,null,[[2,8],[16,23]])})));return function(e){return n.apply(this,arguments)}}(),P="",C="";return(0,f.KX)(o)&&(P=f.AB[o].label,C=o.slice(1)),{label:P,onSubmit:q,isSubmitting:I,currentQuestion:C,thoughtRecord:g,isValidQuestion:T}}},3393:function(e,r,n){n.d(r,{J1:function(){return k},NI:function(){return m},Yp:function(){return y},lX:function(){return w}});var t=n(5223),a=n(1340),i=n(6134),s=n(9611),o=n(2791),l=n(9113);function u(){return u=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},u.apply(this,arguments)}function c(e,r){if(null==e)return{};var n,t,a={},i=Object.keys(e);for(t=0;t<i.length;t++)n=i[t],r.indexOf(n)>=0||(a[n]=e[n]);return a}var d=["id","isRequired","isInvalid","isDisabled","isReadOnly"],f=["getRootProps","htmlProps"],p=(0,s.kr)({strict:!1,name:"FormControlContext"}),v=p[0],h=p[1];var m=(0,a.Gp)((function(e,r){var n=(0,a.jC)("Form",e),l=function(e){var r=e.id,n=e.isRequired,a=e.isInvalid,l=e.isDisabled,f=e.isReadOnly,p=c(e,d),v=(0,t.Me)(),h=r||"field-"+v,m=h+"-label",b=h+"-feedback",x=h+"-helptext",g=o.useState(!1),y=g[0],k=g[1],R=o.useState(!1),T=R[0],w=R[1],Z=(0,t.kt)(),O=Z[0],E=Z[1],I=o.useCallback((function(e,r){return void 0===e&&(e={}),void 0===r&&(r=null),u({id:x},e,{ref:(0,s.lq)(r,(function(e){e&&w(!0)}))})}),[x]),N=o.useCallback((function(e,r){var n,t;return void 0===e&&(e={}),void 0===r&&(r=null),u({},e,{ref:r,"data-focus":(0,i.PB)(O),"data-disabled":(0,i.PB)(l),"data-invalid":(0,i.PB)(a),"data-readonly":(0,i.PB)(f),id:null!=(n=e.id)?n:m,htmlFor:null!=(t=e.htmlFor)?t:h})}),[h,l,O,a,f,m]),_=o.useCallback((function(e,r){return void 0===e&&(e={}),void 0===r&&(r=null),u({id:b},e,{ref:(0,s.lq)(r,(function(e){e&&k(!0)})),"aria-live":"polite"})}),[b]),q=o.useCallback((function(e,r){return void 0===e&&(e={}),void 0===r&&(r=null),u({},e,p,{ref:r,role:"group"})}),[p]),P=o.useCallback((function(e,r){return void 0===e&&(e={}),void 0===r&&(r=null),u({},e,{ref:r,role:"presentation","aria-hidden":!0,children:e.children||"*"})}),[]);return{isRequired:!!n,isInvalid:!!a,isReadOnly:!!f,isDisabled:!!l,isFocused:!!O,onFocus:E.on,onBlur:E.off,hasFeedbackText:y,setHasFeedbackText:k,hasHelpText:T,setHasHelpText:w,id:h,labelId:m,feedbackId:b,helpTextId:x,htmlProps:p,getHelpTextProps:I,getErrorMessageProps:_,getRootProps:q,getLabelProps:N,getRequiredIndicatorProps:P}}((0,a.Lr)(e)),p=l.getRootProps;l.htmlProps;var h=c(l,f),m=(0,i.cx)("chakra-form-control",e.className);return o.createElement(v,{value:h},o.createElement(a.Fo,{value:n},o.createElement(a.m$.div,u({},p({},r),{className:m,__css:n.container}))))}));i.Ts&&(m.displayName="FormControl");var b=(0,a.Gp)((function(e,r){var n=h(),t=(0,a.yK)(),s=(0,i.cx)("chakra-form__helper-text",e.className);return o.createElement(a.m$.div,u({},null==n?void 0:n.getHelpTextProps(e,r),{__css:t.helperText,className:s}))}));i.Ts&&(b.displayName="FormHelperText");var x=["isDisabled","isInvalid","isReadOnly","isRequired"],g=["id","disabled","readOnly","required","isRequired","isInvalid","isReadOnly","isDisabled","onFocus","onBlur"];function y(e){var r=function(e){var r,n,t,a=h(),s=e.id,o=e.disabled,l=e.readOnly,d=e.required,f=e.isRequired,p=e.isInvalid,v=e.isReadOnly,m=e.isDisabled,b=e.onFocus,x=e.onBlur,y=c(e,g),k=e["aria-describedby"]?[e["aria-describedby"]]:[];null!=a&&a.hasFeedbackText&&null!=a&&a.isInvalid&&k.push(a.feedbackId);null!=a&&a.hasHelpText&&k.push(a.helpTextId);return u({},y,{"aria-describedby":k.join(" ")||void 0,id:null!=s?s:null==a?void 0:a.id,isDisabled:null!=(r=null!=o?o:m)?r:null==a?void 0:a.isDisabled,isReadOnly:null!=(n=null!=l?l:v)?n:null==a?void 0:a.isReadOnly,isRequired:null!=(t=null!=d?d:f)?t:null==a?void 0:a.isRequired,isInvalid:null!=p?p:null==a?void 0:a.isInvalid,onFocus:(0,i.v0)(null==a?void 0:a.onFocus,b),onBlur:(0,i.v0)(null==a?void 0:a.onBlur,x)})}(e),n=r.isDisabled,t=r.isInvalid,a=r.isReadOnly,s=r.isRequired;return u({},c(r,x),{disabled:n,readOnly:a,required:s,"aria-invalid":(0,i.Qm)(t),"aria-required":(0,i.Qm)(s),"aria-readonly":(0,i.Qm)(a)})}var k=(0,a.Gp)((function(e,r){var n=(0,a.jC)("FormError",e),t=(0,a.Lr)(e),s=h();return null!=s&&s.isInvalid?o.createElement(a.Fo,{value:n},o.createElement(a.m$.div,u({},null==s?void 0:s.getErrorMessageProps(t,r),{className:(0,i.cx)("chakra-form__error-message",e.className),__css:u({display:"flex",alignItems:"center"},n.text)}))):null}));i.Ts&&(k.displayName="FormErrorMessage");var R=(0,a.Gp)((function(e,r){var n=(0,a.yK)(),t=h();if(null==t||!t.isInvalid)return null;var s=(0,i.cx)("chakra-form__error-icon",e.className);return o.createElement(l.ZP,u({ref:r,"aria-hidden":!0},e,{__css:n.icon,className:s}),o.createElement("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"}))}));i.Ts&&(R.displayName="FormErrorIcon");var T=["className","children","requiredIndicator","optionalIndicator"],w=(0,a.Gp)((function(e,r){var n,t=(0,a.mq)("FormLabel",e),s=(0,a.Lr)(e);s.className;var l=s.children,d=s.requiredIndicator,f=void 0===d?o.createElement(Z,null):d,p=s.optionalIndicator,v=void 0===p?null:p,m=c(s,T),b=h(),x=null!=(n=null==b?void 0:b.getLabelProps(m,r))?n:u({ref:r},m);return o.createElement(a.m$.label,u({},x,{className:(0,i.cx)("chakra-form__label",s.className),__css:u({display:"block",textAlign:"start"},t)}),l,null!=b&&b.isRequired?f:v)}));i.Ts&&(w.displayName="FormLabel");var Z=(0,a.Gp)((function(e,r){var n=h(),t=(0,a.yK)();if(null==n||!n.isRequired)return null;var s=(0,i.cx)("chakra-form__required-indicator",e.className);return o.createElement(a.m$.span,u({},null==n?void 0:n.getRequiredIndicatorProps(e,r),{__css:t.requiredIndicator,className:s}))}));i.Ts&&(Z.displayName="RequiredIndicator")}}]);
//# sourceMappingURL=764.b666c95c.chunk.js.map