{"version":3,"file":"static/js/870.311e2062.chunk.js","mappings":"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","sources":["Components/LoginForm.tsx","Components/UserPassFormElements.tsx"],"sourcesContent":["import {\n  Flex,\n  Box,\n  Stack,\n  Link,\n  Button,\n  Heading,\n  useToast,\n} from '@chakra-ui/react';\n\nimport useAuth, {Token} from '../Hooks/useAuth'\nimport { useForm, SubmitHandler } from 'react-hook-form';\nimport { loginEndpoint } from '../utils/api';\nimport UserPassFormElements from './UserPassFormElements'\nimport UseThemeColors from '../Hooks/useThemeColors';\nimport { useEffect } from 'react';\nimport { useNavigate, Link as BrowserLink} from 'react-router-dom';\n\n\ninterface FormValues {\n  username: string,\n  password: string\n}\n\nconst Login: React.FC = () => {\n  const toast = useToast()\n  const {login, currentUser} = useAuth()\n  const {foregroundColor, backgroundColor} = UseThemeColors()\n  const {register, handleSubmit, formState: {errors , isSubmitting}} = useForm<FormValues>()\n  const navigate = useNavigate()\n  useEffect(() => {\n    if(currentUser) {\n      navigate(\"/situationQuestion\")\n    }\n  }, [currentUser,navigate])\n\n  const onSubmit: SubmitHandler<FormValues> = async(value) => {\n    try{\n      const response = await fetch(loginEndpoint, {\n        body: new URLSearchParams({...value}),\n        method: \"POST\",\n        mode: \"cors\",\n      })\n      if(response.status === 200) {\n        const token: Token = await response.json()\n        toast({\n          status: 'success',\n          description: \"Logged in.  Redirecting...\"\n        })\n        login(token)\n        \n        \n      } else {\n        throw new Error(\"Incorrect Username or Password\")\n      }\n    } catch (error) {\n      if(error instanceof Error) {   \n        toast({\n          status: 'error',\n          description: error.message\n        })\n    \n\n      }\n    }\n  }\n  return (\n    \n    <Stack spacing={8} mx={'auto'} maxW={'lg'} maxH={'100%'} py={12} px={6}>\n      <Stack align={'center'}>\n        <Heading fontSize={'4xl'}>Sign in to your account</Heading>\n      </Stack>\n      <form onSubmit={handleSubmit(onSubmit)}>\n        <Box rounded={'lg'} bg={foregroundColor} boxShadow={'lg'} p={8}>\n          <Stack spacing={4}>\n            <UserPassFormElements register={register} errors={errors} />\n            <Stack spacing={8}>\n              <Stack\n                direction={{ base: 'column', sm: 'row' }}\n                align={'start'}\n                spacing={4}\n                justify={'space-between'}\n              >\n                <Link color={'blue.400'}>\n                    Forgot password?\n                </Link>\n              </Stack>\n              <Button\n                type={\"submit\"}\n                isLoading={isSubmitting}\n                loadingText={\"Submitting\"}\n                variant={\"loginSubmit\"}\n                bg={backgroundColor}\n                _hover={{\n                  bg: 'blue.500',\n                }}\n              >\n                  Sign in\n              </Button>\n              <Link as={BrowserLink} \n                to=\"/signup\" \n                textAlign={\"center\"}\n                color={'blue.400'}\n              >\n                    New User? Sign up here!\n              </Link>\n            </Stack>\n          </Stack>\n        </Box>\n      </form>\n    </Stack>\n    \n  );\n}\n\nexport default Login","import { FormControl, FormLabel, Input, FormErrorMessage } from \"@chakra-ui/react\"\nimport {FieldError, UseFormRegister} from 'react-hook-form'\n\ninterface FormValues {\n  username: string,\n  password: string\n}\ninterface IProps {\n  errors: Errors,\n  register: UseFormRegister<FormValues>\n}\ninterface Errors {\n  username?: FieldError | undefined;\n  password?: FieldError | undefined;\n}\n\nconst UserPassFormElements: React.FC<IProps> = ({errors, register}: IProps) => {\n  return (\n    <>\n      <FormControl isRequired isInvalid={!!errors?.username} id=\"email\">\n        <FormLabel>Email address</FormLabel>\n        <Input type=\"text\" placeholder=\"Email\" {...register(\n          \"username\", {required: true, pattern:{\n            value: /^\\S+@\\S+$/i, message: \"Not a valid email address\"}})}  />\n        <FormErrorMessage>{errors?.username?.message}</FormErrorMessage>\n      </FormControl>\n      <FormControl isInvalid={!!errors?.password?.message} id=\"password\">\n        <FormLabel>Password</FormLabel>\n        <Input type=\"password\" placeholder=\"password\" {\n          ...register(\"password\", {\n            required: true, maxLength:{\n              value: 10,\n              message:\"Your password is too long\"},\n            minLength:{\n              value: 4,\n              message: \"Your password is too short\"}})} /> \n        <FormErrorMessage>{errors?.password?.message}</FormErrorMessage>\n      </FormControl>\n    </>)\n                \n}\n\n\nexport default UserPassFormElements"],"names":["toast","useToast","useAuth","login","currentUser","UseThemeColors","foregroundColor","backgroundColor","useForm","register","handleSubmit","formState","errors","isSubmitting","navigate","useNavigate","useEffect","onSubmit","value","fetch","loginEndpoint","body","URLSearchParams","method","mode","response","status","json","token","description","Error","message","spacing","mx","maxW","maxH","py","px","align","fontSize","rounded","bg","boxShadow","p","direction","base","sm","justify","color","type","isLoading","loadingText","variant","_hover","as","BrowserLink","to","textAlign","isRequired","isInvalid","username","id","placeholder","required","pattern","password","maxLength","minLength"],"sourceRoot":""}